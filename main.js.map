{"version":3,"file":"main.js","mappings":"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","sources":["webpack://list-editor/./src/components/handlers/dataIsInvalid.js","webpack://list-editor/./src/components/renderer/Renderer.js","webpack://list-editor/./src/components/memory/Memory.js","webpack://list-editor/./src/components/tooltip/Tooltip.js","webpack://list-editor/./src/js/app.js","webpack://list-editor/./src/components/app/App.js"],"sourcesContent":["export default function dataIsInvalid(data) {\n  const errors = {\n    name: { nodata: 'Field must be filled' },\n    price: {\n      nodata: 'Field must be filled',\n      incorrect: 'Price must be a number',\n      low: 'Price must be more than zero',\n    },\n  };\n\n  let text = null;\n  let place = null;\n\n  const clearedName = data.name.trim();\n  const clearedPrice = Number(data.price.trim());\n\n  if (clearedName.length === 0) {\n    text = errors.name.nodata;\n    place = 'name';\n  } else if (clearedPrice.length === 0) {\n    text = errors.price.nodata;\n    place = 'price';\n  } else if (typeof clearedPrice !== 'number' || Number.isNaN(clearedPrice)) {\n    text = errors.price.incorrect;\n    place = 'price';\n  } else if (clearedPrice <= 0) {\n    text = errors.price.low;\n    place = 'price';\n  } else {\n    return false;\n  }\n  return { text, place };\n}\n","export default class Renderer {\n  constructor() {\n    this.products = document.querySelector('.products');\n  }\n\n  static createHTML(obj) {\n    return `\n      <li class=\"product\" data-id=\"${obj.id}\">\n        <div class=\"name\">${obj.name}</div>\n        <div class=\"price\">${obj.price}</div>\n        <div class=\"tools\">\n          <span class=\"update\">✎</span>\n          <span class=\"delete\">✕</span>\n        </div>\n      </li>\n    `;\n  }\n\n  static clearDOM() {\n    const products = document.querySelectorAll('.product');\n    products.forEach((el) => el.remove());\n  }\n\n  addToDOM(obj) {\n    const html = Renderer.createHTML(obj);\n    this.products.insertAdjacentHTML('beforeend', html);\n  }\n}\n","import Renderer from '../renderer/Renderer';\n\nexport default class Memory {\n  constructor() {\n    this.memory = [];\n    this.renderer = new Renderer();\n  }\n\n  findProduct(id) {\n    return this.memory.find((el) => el.id === Number(id));\n  }\n\n  add(data) {\n    this.memory.push(data);\n    this.render();\n  }\n\n  remove(id) {\n    const index = this.memory.findIndex((el) => el.id === id);\n    this.memory.splice(index, 1);\n    this.render();\n  }\n\n  replace(data) {\n    const index = this.memory.findIndex((el) => el.id === data.id);\n    this.memory.splice(index, 1, data);\n    this.render();\n  }\n\n  render() {\n    Renderer.clearDOM();\n    this.memory.forEach((el) => this.renderer.addToDOM(el));\n  }\n}\n","export default class Tooltip {\n  constructor() {\n    this.tooltips = [];\n  }\n\n  showTooltip(message, element) {\n    const tooltip = document.createElement('div');\n    tooltip.classList.add('tooltip');\n    tooltip.textContent = message;\n\n    const id = performance.now();\n\n    this.tooltips.push({\n      id,\n      element: tooltip,\n    });\n\n    const { bottom, left } = element.getBoundingClientRect();\n    tooltip.top = `${bottom + 10}px`;\n\n    document.querySelector('.popup').appendChild(tooltip);\n  }\n}\n","import '../css/style.css';\nimport App from '../components/app/App';\n\nconst app = new App(document.querySelector('.application'));\n","import dataIsInvalid from '../handlers/dataIsInvalid';\nimport Memory from '../memory/Memory';\nimport Tooltip from '../tooltip/Tooltip';\n\nexport default class App {\n  constructor(element) {\n    this.element = element;\n    this.memory = new Memory();\n    this.showBtn = this.element.querySelector('.create');\n    this.popup = this.element.querySelector('.popup');\n\n    this.onClick = this.onClick.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n\n    this.element.addEventListener('click', this.onClick);\n    this.popup.addEventListener('submit', this.onSubmit);\n  }\n\n  onClick(e) {\n    if (e.target.classList.contains('cancel-button') || e.target.classList.contains('create')) {\n      this.popup.classList.remove('being-edited');\n      this.togglePopup();\n      this.popup.reset();\n      return;\n    }\n\n    const product = e.target.closest('.product');\n    if (!product) {\n      return;\n    }\n\n    const productId = product.getAttribute('data-id');\n    const updated = this.memory.findProduct(productId);\n    const { id, name, price } = updated;\n\n    if (e.target.classList.contains('delete')) {\n      this.memory.remove(id);\n    } else if (e.target.classList.contains('update')) {\n      this.popup.classList.add('being-edited');\n      this.togglePopup();\n      this.popup.name.value = name;\n      this.popup.price.value = price;\n      this.popup.setAttribute('id', id);\n    }\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n\n    const id = performance.now();\n    const name = this.popup.name.value;\n    const price = this.popup.price.value;\n\n    const data = { id, name, price };\n\n    if (dataIsInvalid(data)) {\n      const { text, place } = dataIsInvalid(data);\n      this.showTooltip(text, this.popup[place]);\n      return;\n    }\n\n    if (this.popup.classList.contains('being-edited')) {\n      data.id = Number(this.popup.getAttribute('id'));\n      this.memory.replace(data);\n      this.popup.reset();\n      this.popup.classList.remove('being-edited');\n    } else {\n      this.memory.add(data);\n    }\n    this.popup.reset();\n    this.togglePopup();\n  }\n\n  showTooltip(text, element) {\n    this.tooltipFactory = new Tooltip();\n    this.tooltipFactory.showTooltip(text, element);\n  }\n\n  togglePopup() {\n    this.popup.classList.toggle('hidden');\n  }\n}\n"],"names":["dataIsInvalid","data","errors","text","place","clearedName","name","trim","clearedPrice","Number","price","length","isNaN","Renderer","constructor","this","products","document","querySelector","createHTML","obj","id","clearDOM","querySelectorAll","forEach","el","remove","addToDOM","html","insertAdjacentHTML","Memory","memory","renderer","findProduct","find","add","push","render","index","findIndex","splice","replace","Tooltip","tooltips","showTooltip","message","element","tooltip","createElement","classList","textContent","performance","now","bottom","left","getBoundingClientRect","top","appendChild","showBtn","popup","onClick","bind","onSubmit","addEventListener","e","target","contains","togglePopup","reset","product","closest","productId","getAttribute","updated","value","setAttribute","preventDefault","tooltipFactory","toggle"],"sourceRoot":""}